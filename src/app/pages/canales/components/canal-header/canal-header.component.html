<div class="canal-header-card">
  <div class="header-main-section">
    <!-- Logo canal -->
    <div class="canal-logo">
      <div *ngIf="canal.foto" class="logo-image" (click)="onImageClick()">
        <img [src]="canal.foto" alt="Logo Canal" class="cursor-pointer" />
      </div>
      <div *ngIf="!canal.foto" class="logo-placeholder">
        <span>{{
          canal.nombreFantasia
            ? canal.nombreFantasia.substring(0, 2).toUpperCase()
            : ""
        }}</span>
      </div>
    </div>

    <!-- Titulo y badge -->
    <div class="title-container">
      <div class="title-badge-wrapper">
        <h2 class="canal-title">{{ canal.nombreFantasia }}</h2>
        <span
          class="status-badge cursor-pointer"
          [ngClass]="canal.activo ? 'active' : 'inactive'"
          (click)="onToggleEstado()"
        >
          {{ canal.activo ? "Activo" : "Inactivo" }}
        </span>
      </div>
    </div>
  </div>

  <!-- Información contacto -->
  <div class="owner-contact-info">
    <div class="contact-item">
      <i class="bi bi-person"></i>
      <span>{{ canal.titularNombreCompleto || "No especificado" }}</span>
    </div>
    <div class="contact-item">
      <i class="bi bi-telephone"></i>
      <span>{{ canal.titularTelefono || "No especificado" }}</span>
    </div>
    <div class="contact-item">
      <i class="bi bi-envelope"></i>
      <span>{{ canal.titularEmail || "No especificado" }}</span>
    </div>
  </div>

  <!-- Estadísticas con el nuevo estilo -->
  <div class="stats-container">
    <div class="stats-row">
      <div class="stat-item">
        <div class="stat-icon bg-light-primary">
          <i class="bi bi-diagram-3"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ subcanalesActivos + subcanalesInactivos }}</div>
          <div class="stat-label">Subcanales</div>
        </div>
      </div>

      <div class="stat-item">
        <div class="stat-icon bg-light-warning">
          <i class="bi bi-list-check"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ planesActivos + planesInactivos }}</div>
          <div class="stat-label">Planes</div>
        </div>
      </div>

      <div class="stat-item">
        <div class="stat-icon bg-light-info">
          <i class="bi bi-cash"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ totalOperaciones }}</div>
          <div class="stat-label">Operaciones Totales</div>
        </div>
      </div>

      <div class="stat-item">
        <div class="stat-icon bg-light-success">
          <i class="bi bi-check-circle"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ operacionesLiquidadas }}</div>
          <div class="stat-label">Op. Liquidadas</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de previsualización de imagen -->
<div class="image-preview-overlay" *ngIf="showImagePreview" (click)="closeImagePreview()">
  <div class="image-preview-container" (click)="$event.stopPropagation()">
    <button class="btn-close-preview" (click)="closeImagePreview()">
      <i class="bi bi-x"></i>
    </button>
    <img [src]="canal.foto" alt="Vista previa" class="preview-image" *ngIf="canal.foto" />
  </div>
</div>
